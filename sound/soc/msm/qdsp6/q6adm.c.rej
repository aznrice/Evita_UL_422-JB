--- sound/soc/msm/qdsp6/q6adm.c	2013-06-24 03:50:47.000000000 -0500
+++ sound/soc/msm/qdsp6/q6adm.c	2013-08-02 00:38:03.000000000 -0500
@@ -302,6 +302,9 @@
 		switch (data->opcode) {
 		case ADM_CMDRSP_COPP_OPEN:
 		case ADM_CMDRSP_MULTI_CHANNEL_COPP_OPEN:
+		
+		case ADM_CMDRSP_MULTI_CHANNEL_COPP_OPEN_V3:
+		
 		case ADM_CMDRSP_MULTI_CHANNEL_COPP_OPEN_V2: {
 			struct adm_copp_open_respond *open = data->payload;
 			if (open->copp_id == INVALID_COPP_ID) {
@@ -823,8 +826,17 @@
 
 		open.hdr.pkt_size =
 			sizeof(struct adm_multi_ch_copp_open_command);
-		open.hdr.opcode = ADM_CMD_MULTI_CHANNEL_COPP_OPEN;
-		open.reserved = 0;
+		
+		if (perfmode) {
+			pr_debug("%s Performance mode", __func__);
+			open.hdr.opcode = ADM_CMD_MULTI_CHANNEL_COPP_OPEN_V3;
+			open.flags = ADM_MULTI_CH_COPP_OPEN_PERF_MODE_BIT;
+			open.reserved = PCM_BITS_PER_SAMPLE;
+		} else {
+			open.hdr.opcode = ADM_CMD_MULTI_CHANNEL_COPP_OPEN;
+			open.reserved = 0;
+		}
+		
 		memset(open.dev_channel_mapping, 0, 8);
 
 		if (channel_mode == 1)	{
@@ -934,7 +946,7 @@
 
 
 int adm_multi_ch_copp_open_v2(int port_id, int path, int rate, int channel_mode,
-				int topology, uint16_t bit_width)
+				int topology, uint16_t bit_width, int perfmode)
 {
 	struct adm_multi_ch_copp_open_command_v2 open;
 	int ret = 0;
@@ -973,7 +985,15 @@
 		open.hdr.pkt_size =
 			sizeof(struct adm_multi_ch_copp_open_command_v2);
 
-		open.hdr.opcode = ADM_CMD_MULTI_CHANNEL_COPP_OPEN_V2;
+		
+		if (perfmode) {
+			pr_debug("%s Performance mode", __func__);
+			open.hdr.opcode = ADM_CMD_MULTI_CHANNEL_COPP_OPEN_V3;
+			open.flags = ADM_MULTI_CH_COPP_OPEN_PERF_MODE_BIT;
+		} else {
+			open.hdr.opcode = ADM_CMD_MULTI_CHANNEL_COPP_OPEN_V2;
+		}
+		
 		pr_debug("%s Performance mode", __func__);
 
 		memset(open.dev_channel_mapping, 0, 8);
@@ -1156,7 +1176,6 @@
 	if (!ret) {
 		pr_err("%s: ADM cmd Route failed for port %d\n",
 					__func__, port_id[0]);
-		HTC_Q6_BUG();
 		ret = -EINVAL;
 		goto fail_cmd;
 	}
@@ -1397,7 +1416,6 @@
 		if (!ret) {
 			pr_err("%s: ADM cmd Route failed for port %d\n",
 						__func__, port_id);
-			HTC_Q6_BUG();
 			ret = -EINVAL;
 			goto fail_cmd;
 		}
